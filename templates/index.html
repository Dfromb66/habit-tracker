<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Tracker v3</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Habit Tracker v3</h1>
            <div class="today-date" id="todayDate"></div>
        </div>

        <div class="controls">
            <div class="month-navigation">
                <button class="month-nav-btn" onclick="previousMonth()">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="current-month" id="currentMonth"></div>
                <button class="month-nav-btn" onclick="nextMonth()">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="showAddHabitModal()">
                    <i class="fas fa-plus"></i> Add Habit
                </button>
                <button class="btn btn-secondary" onclick="exportData()">
                    <i class="fas fa-download"></i> Export
                </button>
                <button class="btn btn-secondary" onclick="showImportModal()">
                    <i class="fas fa-upload"></i> Import
                </button>
            </div>
        </div>

        <div class="calendar-container">
            <table class="calendar" id="calendarTable">
                <thead>
                    <tr>
                        <th>Habit</th>
                        <!-- Day headers will be generated by JavaScript -->
                    </tr>
                </thead>
                <tbody id="calendarBody">
                </tbody>
            </table>
        </div>
    </div>

    <!-- Add/Edit Habit Modal -->
    <div id="habitModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title" id="habitModalTitle">Add New Habit</span>
                <span class="close" onclick="closeHabitModal()">&times;</span>
            </div>
            <form id="habitForm">
                <div class="form-group">
                    <label for="habitName">Habit Name:</label>
                    <input type="text" id="habitName" required>
                </div>
                <div class="form-group">
                    <label for="habitIcon">Icon:</label>
                    <div class="icon-grid" id="iconGrid">
                        <!-- Icons will be populated by JavaScript -->
                    </div>
                </div>
                <div class="form-group">
                    <label for="habitColor">Icon Color:</label>
                    <div class="color-grid" id="colorGrid">
                        <!-- Colors will be populated by JavaScript -->
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <button type="button" class="btn btn-secondary" onclick="closeHabitModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Entry Value Modal -->
    <div id="entryModal" class="modal">
        <div class="modal-content entry-modal-content">
            <div class="modal-header">
                <span class="modal-title">Edit Entry</span>
                <span class="close" onclick="closeEntryModal()">&times;</span>
            </div>
            <form id="entryForm">
                <div class="form-group">
                    <label for="entryValue">Value:</label>
                    <input type="text" id="entryValue" class="entry-value-input">
                </div>
                <div class="entry-modal-buttons">
                    <button type="button" class="btn btn-secondary" onclick="closeEntryModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">Import Data</span>
                <span class="close" onclick="closeImportModal()">&times;</span>
            </div>
            <form id="importForm">
                <div class="form-group">
                    <label for="importFile">Select CSV File:</label>
                    <input type="file" id="importFile" accept=".csv" required>
                </div>
                <div style="text-align: right;">
                    <button type="button" class="btn btn-secondary" onclick="closeImportModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Import</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html> 